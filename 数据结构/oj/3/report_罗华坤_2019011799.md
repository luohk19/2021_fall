# 第三次编程作业 $Report$

罗华坤 软件02 2019011799

## 1	无线广播

#### 思路

根据题意，当距离20km以内的小镇就无法使用同一频段，因此可以将此问题抽象成2染色问题。

即将村庄视为节点，而小于20km的村庄之间连边，判断该图能否2染色。

图的储存采用邻接表的形式

#### 实现方法

具体实现可以采用 $BFS$，逐层上色。为了防止出现多个联通支的情况，对每个未访问过的节点BFS。

若遍历时发现下层节点已被上色而与该层相同，则说明无法2染色。

而若队列为空（$BFS$ 用队列实现）成功染色，则说明可以2染色。

#### 时间复杂度

由于BFS过程中，每个节点都被放入队列一次，而遍历其邻接点的复杂度为 $O(|e_i|)$

总时间复杂度为 $T(n) = O(|V|) + \sum\limits_{i=1}^{|V|}O(|e_i|) = O(|V|+|E|) $

## 2	旅行商

#### 思路

由于要求最长道路经过的村庄数，可以采用拓扑排序的解决。

拓扑排序用于有向无环图中，若 $A\to B$，则拓扑排序后，$B$ 仍在 $A$ 后。

我们可以利用此性质，对于每一个村庄，取上一层村庄路径的最大值加1，不断递归至算法结束。

#### 实现方法

采用邻接表的方式储存，同 **1** 。每个节点储存经过该村庄后的最大经过村庄数，入度。

遍历得到入度为0的节点，入队。将相邻节点的入度均减1，该节点的路径取上层路径的最大值加1。

若中间队列为空，则算法结束，输出变量 $length$ 储存迄今位置的最大路径长度。

#### 时间复杂度

搜索入度为0的节点时间复杂度为 $O(|V|)$，入度减一的次数与边数相当为 $O(|E|)$

总的时间复杂度为 $T(n) = O(|V| + |E|)$

## 3	平均气温

#### 思路

##### 建树

采用二维 $RangeTree$ 的数据结构，先对 $x$ 进行归并排序，构建 $AVLTree$。

再在每个节点内部按照 $y$ 构建另一棵树 $yTree$。

##### 查找

首先根据x查找到两个叶子节点，再寻找两个结点的公共祖先。

然后从该公共祖先分别向下，逐层查询 $yTree$，再 $yTree$内用二分查找符合范围的值。

在这个过程中记录气温和 $ sum$ 与记录数 $cnt$，最后输出 $sum / cnt$

#### 实现方法

利用书上的代码构建AVLTree，实现旋转等平衡功能，然后再在每个非叶节点上递归地构建 $yTree$

接下来查询前首先查找公共祖先，从公共祖先开始向下逐节点二分查找 $yTree$。

输出结果，后重置便可。

#### 时间复杂度

构建 $yTree$ 过程利用主定理 $T_1(n) = 2T_1(\frac n2)+O(n)=O(n\log n)$ //a=1,b=1,符合case2

而每次查询部分可以理解成 $T_2(n)=2*Height_{Tree}*T_{binSearch}=O(\log^2 n)$

此外$AVLTree$的建树耗时同样为 $O(n\log n)$

因此总的时间复杂度为$T(n)=T_1(n)+m\times T_2(n)=O(n\log n+m\log^2 n)$



